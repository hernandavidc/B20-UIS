<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Este es mi skeleton para laddings con productos de Bootstrap">
    <meta name="author" content="Herni's factory">

    <!-- Bootstrap CSS -->
    <link href="./vendors/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon.ico">


    <title>HTML JavaScript Calculator</title>
  </head>
<body>
    <h1 class="text-center mt-5">HTML JavaScript Calculator</h1>
    <div class="container" style="padding: 30px;border: 1px solid grey;margin-top: 50px;background: whitesmoke;    box-shadow: 5px 5px #525252;    border-radius: 10px;">
        <div class="row mb-4">
            <div class="col-lg-12 nopadding">
                <form name="calculator">
                    <input type="text" 
                        name="values" 
                        id="values" 
                        class="form-control" 
                        style="padding: 10px;font-size: 30px;height: 50px;"
                        onkeypress="return enableCharacters(event)"
                    >
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-3 nopadding mb-2">
                <button id="one" onclick="editValue(value)" value="1" class="w-100 btn btn-primary btn-block btn_font">1</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="two" onclick="editValue(value)" value="2" class="w-100 btn btn-primary btn-block btn_font">2</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="three" onclick="editValue(value)" value="3" class="w-100 btn btn-primary btn-block btn_font">3</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="add" onclick="editValue(value)" value="+" class="w-100 btn btn-success btn-block btn_font">+</button>
            </div>
        </div>
        <div class="row">
            <div class="col-3 nopadding mb-2">
                <button id="four" onclick="editValue(value)" value="4" class="w-100 btn btn-primary btn-block btn_font">4</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="five" onclick="editValue(value)" value="5" class="w-100 btn btn-primary btn-block btn_font">5</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="six" onclick="editValue(value)" value="6" class="w-100 btn btn-primary btn-block btn_font">6</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="minus" onclick="editValue(value)" value="-" class="w-100 btn btn-success btn-block btn_font">-</button>
            </div>
        </div>
        <div class="row">
            <div class="col-3 nopadding mb-2">
                <button id="seven" onclick="editValue(value)" value="7" class="w-100 btn btn-primary btn-block btn_font">7</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="eight" onclick="editValue(value)" value="8" class="w-100 btn btn-primary btn-block btn_font">8</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="nine" onclick="editValue(value)" value="9" class="w-100 btn btn-primary btn-block btn_font">9</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="multiply" onclick="editValue(value)" value="*" class="w-100 btn btn-success btn-block btn_font">*</button>
            </div>
        </div>
        <div class="row">
            <div class="col-3 nopadding mb-2">
                <button id="dot" onclick="editValue(value)" value="." class="w-100 btn btn-primary btn-block btn_font">.</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="zero" onclick="editValue(value)" value="0" class="w-100 btn btn-primary btn-block btn_font">0</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="equal" onclick="result()" class="w-100 btn btn-primary btn-block btn_font">=</button>
            </div>
            <div class="col-3 nopadding mb-2">
                <button id="divide" onclick="editValue(value)" value="/" class="w-100 btn btn-success btn-block btn_font">/</button>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 nopadding mb-2">
                <button class="w-100 btn btn-danger  btn-block" onclick="clearData()">Borrar</button>
            </div>
            <div class="col-lg-6 nopadding mb-2">
                <button class="w-100 btn btn-danger  btn-block" onclick="clearData('all')">Limpiar</button>
            </div>
        </div>
    </div>

    <script>
        function enableCharacters(e){
            const keycode = e.keyCode || e.which;
            const key = String.fromCharCode(keycode);
            const enabledChars = "0123456789+-*/";
            const specialsKeys = [37, 39, 8, 46];

            let isSpecialKey = specialsKeys.includes(keycode);
            if(enabledChars.indexOf(key) == -1 && !isSpecialKey){
                return false
            }
        }

        function editValue(character){
            let prevValue = document.calculator.values.value;
            let lastLetter = prevValue[prevValue.length - 1];
            const operatotChars = "+-*/";
            
            if(operatotChars.includes(character) && operatotChars.indexOf(lastLetter) == -1){
                document.getElementById('values').value = prevValue + character;
            } else if(operatotChars.indexOf(character) == -1){
                document.getElementById('values').value = prevValue + character;
            }
        }

        function clearData(cant = 'one'){
            if(cant == 'all'){
                document.getElementById('values').value = '';
            } else {
                const prev = document.calculator.values.value;
                const newValue = prev.substring(0, prev.length - 1);
                document.getElementById('values').value = newValue;
            }
        }

        function result(){
            const prev = document.calculator.values.value;
            let result = eval(prev);

            document.getElementById('values').value = result;
        }
    </script>
</body>
</html>